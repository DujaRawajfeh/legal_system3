<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>سحب الدعوى</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');

  body {
    font-family: 'Cairo', sans-serif;
    background-color: #f0f2f5;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }

  .container {
    background-color: #fff;
    padding: 20px 30px;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    width: 450px;
  }

  h2 { text-align: center; margin-bottom: 20px; }

  .form-group { display: flex; flex-direction: column; margin-bottom: 15px; }

  label { font-weight: bold; margin-bottom: 5px; }

  .case-number-row { display: flex; gap: 5px; justify-content: flex-start; margin-bottom: 10px; }

  .case-part { width: 60px; text-align: center; padding: 5px; border-radius: 5px; border: 1px solid #ccc; }

  .form-row { display: flex; gap: 10px; margin-bottom: 10px; }

  input, select { padding: 8px; border-radius: 5px; border: 1px solid #ccc; flex: 1; }

  .buttons { display: flex; gap: 10px; margin-top: 15px; }

  button { flex: 1; padding: 10px; border: none; border-radius: 5px; font-weight: bold; color: #fff; cursor: pointer; }

  .exit-btn { background-color: #e74c3c; }
  .withdraw-btn { background-color: #000; }
</style>
</head>
<body>

<div class="container">
  <h2>سحب الدعوى</h2>

  <!-- رقم الدعوى -->
  <div class="form-group">
    <label>رقم الدعوى:</label>
    <div class="case-number-row">
      <input type="text" maxlength="4" class="case-part" id="box1" placeholder="XXXX" oninput="fillOtherBoxes()">
      <input type="text" maxlength="2" class="case-part" id="box2" placeholder="XX">
      <input type="text" maxlength="2" class="case-part" id="box3" placeholder="X/Y">
      <input type="text" maxlength="4" class="case-part" id="box4" placeholder="XXXX">
    </div>
  </div>

  <!-- المحكمة والمدعي العام -->
  <div class="form-group form-row">
    <div style="flex:1;">
      <label for="court">المحكمة:</label>
      <select id="court">
        <option value="">-- اختر المحكمة --</option>
        <option value="محكمة بداية عمان">محكمة بداية عمان</option>
        <option value="محكمة بداية الزرقاء">محكمة بداية الزرقاء</option>
        <option value="محكمة بداية إربد">محكمة بداية إربد</option>
      </select>
    </div>
    <div style="flex:1;">
      <label for="publicProsecutor">السجل العام:</label>
       <select id="publicProsecutor">
        <option value="">-- اختر المحكمة --</option>
        <option value="محكمة بداية عمان"></option>
        <option value="محكمة بداية الزرقاء">محكمة بداية الزرقاء</option>
        <option value="محكمة بداية إربد">محكمة بداية إربد</option>
      </select>
    </div>
  </div>

  <!-- الأزرار -->
  <div class="buttons">
    <button class="withdraw-btn" onclick="withdrawCase()">سحب الدعوى</button>
    <button class="exit-btn" onclick="exitPage()">خروج</button>
  </div>
</div>

<script>
  // قاعدة بيانات وهمية
  const fakeDB = [
    { full: '1234-12-34-5678', court: 'محكمة بداية عمان', prosecutor: 'أحمد علي' },
    { full: '5678-34-56-1234', court: 'محكمة بداية الزرقاء', prosecutor: 'ليلى محمود' }
  ];

  function fillOtherBoxes() {
    const val = document.getElementById('box1').value;
    if(val.length === 4) {
      const found = fakeDB.find(item => item.full.startsWith(val));
      if(found) {
        const parts = found.full.split('-');
        document.getElementById('box1').value = parts[0];
        document.getElementById('box2').value = parts[1];
        document.getElementById('box3').value = parts[2];
        document.getElementById('box4').value = parts[3];
        document.getElementById('court').value = found.court;
        document.getElementById('publicProsecutor').value = found.prosecutor;
      }
    } else {
      document.getElementById('box2').value = '';
      document.getElementById('box3').value = '';
      document.getElementById('box4').value = '';
      document.getElementById('court').value = '';
      document.getElementById('publicProsecutor').value = '';
    }
  }

  function getFullCaseNumber() {
    return `${document.getElementById('box1').value}-${document.getElementById('box2').value}-${document.getElementById('box3').value}-${document.getElementById('box4').value}`;
  }

  function withdrawCase() {
    const caseNumber = getFullCaseNumber();
    const court = document.getElementById('court').value;
    const prosecutor = document.getElementById('publicProsecutor').value;

    if(!caseNumber.includes('-') || !court || !prosecutor) {
      alert('الرجاء ملء جميع الحقول بشكل صحيح');
      return;
    }

    const found = fakeDB.find(item => 
      item.full === caseNumber &&
      item.court === court &&
      item.prosecutor === prosecutor
    );

    if(found) {
      alert(`تم سحب الدعوى:\nرقم الدعوى: ${caseNumber}\nالمحكمة: ${court}\nالمدعي العام: ${prosecutor}`);
    } else {
      alert('الدعوى غير موجودة في النظام التجريبي');
    }
  }

  function exitPage() {
    if(confirm('هل تريد الخروج من الصفحة؟')) {
      // طريقة مضمونة لإغلاق الصفحة إذا تم فتحها من نافذة جديدة
      window.open('', '_self'); 
      window.close();
    }
  }
</script>

</body>
</html>
