<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>إعادة تحديد جلسة دعوى</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');

body {
  background-color: #f4f4f4;
  font-family: "Cairo", sans-serif;
}

.container {
  background:white;
  padding:25px;
  border-radius:12px;
  max-width:1200px;
  margin:auto;
  box-shadow:0 4px 10px rgba(0,0,0,0.1);
}

h2 { text-align:center; margin-bottom:20px; }
h3 { text-align:right; margin-top:25px; margin-bottom:10px; }

label {
  font-weight:bold;
  margin-top:10px;
  display:block;
}

input, textarea, select {
  width:100%;
  padding:8px;
  margin-top:5px;
  border-radius:8px;
  border:1px solid #ccc;
  font-size:14px;
  transition:border-color 0.3s;
}

input:disabled, textarea:disabled, select:disabled {
  background-color:#e9ecef;
}

input:focus, select:focus, textarea:focus {
  outline:none;
  border-color:#37678e;
  box-shadow:0 0 5px rgba(55,103,142,0.3);
}

.row { display:flex; gap:10px; margin-top:5px; }
.row input { flex:1; }

table { width:100%; border-collapse:collapse; margin-top:15px; }
th, td { border:1px solid #ccc; padding:8px; text-align:center; }
th { background:#1e1e1e; color:white; }

.old-session-block, .session-block {
  margin-top:20px;
  padding:15px;
  border-radius:10px;
  background:#eef7ff;
  border:1px solid #bcd5ff;
}

/* Form group */
.form-group { display:flex; flex-direction:column; margin-bottom:12px; }
.form-group label { font-weight:bold; margin-bottom:5px; color:#333; }

/* Buttons */
.button-group {
  display:flex;
  gap:10px;
  margin-top:15px;
  justify-content:flex-start;
}

button {
  font-family: "Cairo", sans-serif;
  font-size:13px;
  padding:6px 14px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  background-color:#37678e;
  color:white;
  transition: background-color 0.3s;
}

button:hover:not(:disabled) { background-color:#28527a; }
button:disabled { background-color:#999; cursor:not-allowed; }

.delete-btn {
  background:#a94442;
  color:white;
  padding:4px 10px;
  border-radius:5px;
}

.delete-btn:hover { background:#922d2b; }

.row + button {
  margin-top: 10px;
}
</style>
</head>
<body>

<div class="container">
  <h2>إعادة تحديد جلسات الدعوى</h2>

  <!-- رقم الدعوى -->
  <label>رقم الدعوى</label>
  <div class="row">
    <input type="text" id="caseSerial" placeholder="####">
    <input type="text" id="courtNumber" placeholder="x/y" readonly>
    <input type="text" id="penNumber" placeholder="##" readonly>
    <input type="text" id="yearNumber" placeholder="YYYY" readonly>
  </div>

  <button id="searchBtn">عرض الدعوى</button>

  <!-- تفاصيل الدعوى -->
  <h3>تفاصيل الدعوى</h3>
  <table id="caseTable">
    <thead>
      <tr>
        <th>رقم الدعوى</th>
        <th>نوع الدعوى</th>
        <th>القاضي</th>
        <th>الأطراف</th>
        <th>التاريخ الأصلي</th>
      </tr>
    </thead>
    <tbody>
      <tr><td colspan="5">لا يوجد دعوى بعد.</td></tr>
    </tbody>
  </table>

  <!-- الجلسة القديمة -->
  <h3>الجلسة القديمة</h3>
  <div class="old-session-block">
    <table id="oldSessionTable">
      <thead>
        <tr>
          <th>تاريخ الجلسة</th>
          <th>وقت الجلسة</th>
          <th>سبب الجلسة</th>
          <th>إجراء</th>
        </tr>
      </thead>
      <tbody>
        <tr><td colspan="4">لا توجد جلسة قديمة.</td></tr>
      </tbody>
    </table>
  </div>

  <!-- الجلسة الجديدة -->
  <h3>إدخال جلسة جديدة</h3>
  <div class="session-block" id="sessionBlock">

    <div class="form-group">
      <label for="sessionDate">تاريخ الجلسة</label>
      <input type="date" id="sessionDate" disabled>
    </div>

    <div class="form-group">
      <label for="sessionTime">وقت الجلسة</label>
      <input type="time" id="sessionTime" disabled>
    </div>

    <div class="form-group">
      <label for="sessionReason">سبب الجلسة</label>
      <textarea id="sessionReason" placeholder="اكتب سبب الجلسة..." disabled></textarea>
    </div>

    <div class="form-group">
      <label for="situation">حالة الجلسة</label>
      <select id="situation" disabled>
        <option value="مفصولة">مفصولة</option>
        <option value="مستمرة">مستمرة</option>
        <option value="مكتملة">مكتملة</option>
        <option value="مؤجلة">مؤجلة</option>
      </select>
    </div>

    <div class="form-group">
      <label for="judge">نوع الحكم</label>
      <select id="judge" disabled>
        <option value="تدقيقا">تدقيقا</option>
        <option value="ابتدائي">ابتدائي</option>
        <option value="غيابي">غيابي</option>
        <option value="وجاهي">وجاهي</option>
      </select>
    </div>

    <div class="button-group">
      <button id="saveNewSessionBtn" disabled>حفظ الجلسة</button>
      <button onclick="window.close()">إغلاق</button>
    </div>

  </div>

</div>

<script>
// Fake DB
const casesDB = [
  {
    number:"1234-7\\8-88-2024",
    type:"حقوق",
    judge:"القاضي سالم",
    parties:"أحمد ضد محمد",
    date:"10/10/2025",
    oldSession:{ date:"20/11/2025", time:"10:00", reason:"عدم حضور الطرفين" }
  }
];

const serial = document.getElementById("caseSerial");
const court = document.getElementById("courtNumber");
const pen = document.getElementById("penNumber");
const year = document.getElementById("yearNumber");

const sessionDate = document.getElementById("sessionDate");
const sessionTime = document.getElementById("sessionTime");
const sessionReason = document.getElementById("sessionReason");
const situation = document.getElementById("situation");
const judge = document.getElementById("judge");
const saveBtn = document.getElementById("saveNewSessionBtn");

// تعبئة رقم الدعوى
serial.addEventListener("keyup", ()=>{
  if(serial.value.length === 4){
    court.value = "7\\8";
    pen.value = "88";
    year.value = "2024";
  }
});

// زر البحث
document.getElementById("searchBtn").addEventListener("click", ()=>{
  const full = `${serial.value}-${court.value}-${pen.value}-${year.value}`;
  const cs = casesDB.find(c=>c.number === full);
  const tableBody = document.querySelector("#caseTable tbody");
  const oldBody = document.querySelector("#oldSessionTable tbody");

  if(cs){
    // تعبئة جدول الدعوى
    tableBody.innerHTML = `
      <tr>
        <td>${cs.number}</td>
        <td>${cs.type}</td>
        <td>${cs.judge}</td>
        <td>${cs.parties}</td>
        <td>${cs.date}</td>
      </tr>
    `;

    // تعبئة الجلسة القديمة
    oldBody.innerHTML = `
      <tr>
        <td>${cs.oldSession.date}</td>
        <td>${cs.oldSession.time}</td>
        <td>${cs.oldSession.reason}</td>
        <td><button class="delete-btn" id="deleteOld">حذف</button></td>
      </tr>
    `;

    // زر حذف
    document.getElementById("deleteOld").addEventListener("click", ()=>{
      oldBody.innerHTML = `<tr><td colspan="4">تم حذف الجلسة.</td></tr>`;
      alert("تم حذف الجلسة القديمة بنجاح");
    });

    // تفعيل حقول الجلسة الجديدة وزر الحفظ
    sessionDate.disabled = false;
    sessionTime.disabled = false;
    sessionReason.disabled = false;
    situation.disabled = false;
    judge.disabled = false;
    saveBtn.disabled = false;

  } else {
    tableBody.innerHTML = `<tr><td colspan="5">لا يوجد دعوى مطابقة.</td></tr>`;
    oldBody.innerHTML = `<tr><td colspan="4">لا توجد جلسة قديمة.</td></tr>`;

    // تعطيل الحقول وزر الحفظ
    sessionDate.disabled = true;
    sessionTime.disabled = true;
    sessionReason.disabled = true;
    situation.disabled = true;
    judge.disabled = true;
    saveBtn.disabled = true;
  }
});

// زر حفظ الجلسة الجديدة
saveBtn.addEventListener("click", ()=>{
  alert("تم حفظ الجلسة الجديدة بنجاح");
});
</script>

</body>
</html>
